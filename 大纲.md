# GitHub-飞书机器人

基于 Serverless 云函数的 GitHub-飞书机器人，实现 GitHub 事件自动推送到飞书群聊。

## 项目概述

本项目使用 Vercel + Python Flask 搭建中间服务，作为 GitHub 和飞书之间的桥梁：

```
GitHub Events → Vercel 云函数 → 飞书群聊
```

**核心功能**：接收 GitHub 的数据 → 翻译成飞书的格式 → 发送给飞书机器人

## 为什么选择云函数？

- **无需管理服务器**：只需上传代码，平台自动运行和扩展
- **按需付费，成本极低**：代码仅在事件推送时运行，个人使用几乎零成本
- **部署快速简单**：与 GitHub 仓库关联，git push 即可部署

## 项目结构

```
GitHub-bot/
├── api/
│   └── index.py          # 核心云函数文件
├── requirements.txt      # Python 依赖
├── vercel.json          # Vercel 配置
├── env.example          # 环境变量模板
├── 部署指南.md           # 详细部署说明
└── 大纲.md              # 项目概述
```

## 快速开始

### 1. 准备工作

- GitHub 账号
- Vercel 账号（用 GitHub 账号注册）
- 飞书群聊管理权限

### 2. 创建飞书机器人

1. 在飞书群中添加"自定义机器人"
2. 开启"签名校验"并记录 Secret
3. 复制 Webhook URL

### 3. 部署到 Vercel

1. Fork 本项目到你的 GitHub
2. 在 Vercel 中导入项目
3. 配置环境变量：
   - `GITHUB_SECRET`
   - `FEISHU_WEBHOOK_URL`
   - `FEISHU_SECRET`
4. 部署完成，获取 Vercel URL

### 4. 配置 GitHub Webhook

1. 进入要监控的仓库 Settings → Webhooks
2. 添加 Webhook，填入 Vercel URL
3. 选择需要的事件类型
4. 设置 Secret（与 `GITHUB_SECRET` 一致）

## 支持的事件类型

- ✅ **Push 事件** - 代码推送通知
- ✅ **Issues 事件** - Issue 创建/关闭/修改
- ✅ **Pull Request 事件** - PR 创建/合并/关闭
- ✅ **Release 事件** - 版本发布通知

## 消息效果预览

### Push 事件
```
🚀 [用户名/仓库名] 代码推送
分支: main
推送人: 张三
提交数量: 2

提交详情:
- a1b2c3d: 修复登录bug - 张三
- e4f5g6h: 添加新功能 - 李四

[查看变更] [访问仓库]
```

### Issues 事件
```
🐛 [用户名/仓库名] Issue 创建
标题: 登录页面显示异常
操作人: 张三
Issue #: 123

描述: 在某些浏览器中登录页面样式显示异常...

[查看 Issue]
```

## 详细文档

- [部署指南.md](./部署指南.md) - 完整的部署步骤和配置说明
- [env.example](./env.example) - 环境变量配置模板

## 技术特性

- **安全验证**：支持 GitHub 和飞书的签名验证
- **错误处理**：完善的异常处理和日志记录
- **扩展性强**：模块化设计，易于添加新的事件类型
- **零维护**：基于 Serverless，无需服务器运维

## 本地开发

```bash
# 安装依赖
pip install -r requirements.txt

# 配置环境变量
cp env.example .env
# 编辑 .env 文件

# 启动服务
python api/index.py
```

## 贡献

欢迎提交 Issue 和 Pull Request！

## 许可证

MIT License